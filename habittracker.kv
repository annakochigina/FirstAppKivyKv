<AddHabitPopup>:
    habit_name: text_input.text

    BoxLayout:
        orientation: 'vertical'
        spacing: 10
        padding: 10

        TextInput:
            id: text_input
            text: root.habit_name
            hint_text: "Введите название привычки..."
            multiline: False
            size_hint_y: 0.6

        BoxLayout:
            size_hint_y: 0.4
            spacing: 10

            Button:
                text: "Отмена"
                on_release: root.dismiss()

            Button:
                text: "Добавить"
                background_color: 0.3, 0.7, 0.3, 1
                on_release: root.add_habit()


<HabitWidget>:
    orientation: 'horizontal'
    size_hint_y: None
    height: 50
    spacing: 10
    padding: [5, 0]

    CheckBox:
        size_hint_x: 0.1
        active: root.completed
        on_active: root.toggle(self.active)

    Label:
        size_hint_x: 0.8
        text: root.habit_name
        color: (0.5, 0.5, 0.5, 1) if root.completed else (1, 1, 1, 1)
        font_size: '16sp'
        halign: 'left'
        valign: 'middle'
        text_size: self.size

    Button:
        size_hint_x: 0.1
        text: "del"
        font_size: '20sp'
        background_color: 1, 0.3, 0.3, 1
        on_release: root.delete()


<HabitRoot>:

    orientation: 'vertical'
    spacing: 10
    padding: 10
    # Дата
    Label:
        text: root.today
        font_size: '24sp'
        size_hint_y: 0.1
        bold: True
        halign: 'center'

    # Прогресс бар
    ProgressBar:
        id: progress_bar
        size_hint_y: 0.1
        max: root.progress_max
        value: root.progress_value

    # Текст прогресса
    Label:
        text: root.progress_text
        font_size: '16sp'
        size_hint_y: 0.05

    # Список привычек с прокруткой
    ScrollView:
        size_hint_y: 0.65

        BoxLayout:
            id: habits_container
            orientation: 'vertical'
            size_hint_y: None
            spacing: 5
            height: self.minimum_height

    # Кнопка добавления
    Button:
        text: "Добавить привычку"
        size_hint_y: 0.1
        font_size: '18sp'
        background_color: 0.2, 0.6, 0.8, 1
        on_release: root.show_add_popup()